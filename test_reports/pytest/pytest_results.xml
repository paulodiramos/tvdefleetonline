<?xml version="1.0" encoding="utf-8"?><testsuites name="pytest tests"><testsuite name="pytest" errors="2" failures="14" skipped="0" tests="16" time="5.395" timestamp="2026-02-21T12:09:51.591431+00:00" hostname="agent-env-2946b09c-91f3-4926-a111-1f2dd2edac18"><testcase classname="backend.tests.test_whatsapp_cloud.TestAuth" name="test_admin_login_success" time="0.443"><error message="failed on setup with &quot;AssertionError: Token not in response&#10;assert 'token' in {'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTgxODc4YWMtNDhmOS00M2E5LWFjZmMtZTY3NmRlMGZhN2MyIiwiZW1haWwiOiJhZG1pbkB0dmRlZmxlZXQuY29tIiwicm9sZSI6ImFkbWluIiwiZXhwIjoxNzcxNzYyMTkyfQ.7qOrx9mofcscFtzM7ELR_PZeNYIhs3eOFssufsaDvBs', 'token_type': 'bearer', 'user': {'approved': True, 'associated_gestor_id': None, 'associated_partner_id': None, 'campos_customizados': {}, ...}}&quot;">backend/tests/test_whatsapp_cloud.py:38: in admin_token
    assert "token" in data, "Token not in response"
E   AssertionError: Token not in response
E   assert 'token' in {'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTgxODc4YWMtNDhmOS00M2E5LWFjZmMtZTY3NmRlMGZhN2MyIiwiZW1haWwiOiJhZG1pbkB0dmRlZmxlZXQuY29tIiwicm9sZSI6ImFkbWluIiwiZXhwIjoxNzcxNzYyMTkyfQ.7qOrx9mofcscFtzM7ELR_PZeNYIhs3eOFssufsaDvBs', 'token_type': 'bearer', 'user': {'approved': True, 'associated_gestor_id': None, 'associated_partner_id': None, 'campos_customizados': {}, ...}}</error></testcase><testcase classname="backend.tests.test_whatsapp_cloud.TestAuth" name="test_parceiro_login_success" time="0.334"><error message="failed on setup with &quot;AssertionError: Token not in response&#10;assert 'token' in {'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiYzY5M2M5ZWMtZGRkNS00MDBjLWI3OWQtNjFiNjUxZTdiM2ZkIiwiZW1haWwiOiJnZXJhbEB6bWJ1c2luZXMuY29tIiwicm9sZSI6InBhcmNlaXJvIiwiZXhwIjoxNzcxNzYyMTkyfQ.uCCVcbVNP9pdudsYvbXmEE6FCeTJg79En_yUxhVT-ww', 'token_type': 'bearer', 'user': {'approved': True, 'associated_gestor_id': None, 'associated_partner_id': None, 'campos_customizados': {}, ...}}&quot;">backend/tests/test_whatsapp_cloud.py:50: in parceiro_token
    assert "token" in data, "Token not in response"
E   AssertionError: Token not in response
E   assert 'token' in {'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiYzY5M2M5ZWMtZGRkNS00MDBjLWI3OWQtNjFiNjUxZTdiM2ZkIiwiZW1haWwiOiJnZXJhbEB6bWJ1c2luZXMuY29tIiwicm9sZSI6InBhcmNlaXJvIiwiZXhwIjoxNzcxNzYyMTkyfQ.uCCVcbVNP9pdudsYvbXmEE6FCeTJg79En_yUxhVT-ww', 'token_type': 'bearer', 'user': {'approved': True, 'associated_gestor_id': None, 'associated_partner_id': None, 'campos_customizados': {}, ...}}</error></testcase><testcase classname="backend.tests.test_whatsapp_cloud.TestWhatsAppCloudStatus" name="test_status_endpoint_exists" time="0.527"><failure message="AssertionError: Status endpoint failed: {&quot;detail&quot;:&quot;Invalid token&quot;}&#10;assert 401 == 200&#10; +  where 401 = &lt;Response [401]&gt;.status_code">backend/tests/test_whatsapp_cloud.py:82: in test_status_endpoint_exists
    assert response.status_code == 200, f"Status endpoint failed: {response.text}"
E   AssertionError: Status endpoint failed: {"detail":"Invalid token"}
E   assert 401 == 200
E    +  where 401 = &lt;Response [401]&gt;.status_code</failure></testcase><testcase classname="backend.tests.test_whatsapp_cloud.TestWhatsAppCloudStatus" name="test_status_response_structure" time="0.103"><failure message="assert 401 == 200&#10; +  where 401 = &lt;Response [401]&gt;.status_code">backend/tests/test_whatsapp_cloud.py:90: in test_status_response_structure
    assert response.status_code == 200
E   assert 401 == 200
E    +  where 401 = &lt;Response [401]&gt;.status_code</failure></testcase><testcase classname="backend.tests.test_whatsapp_cloud.TestWhatsAppCloudStatus" name="test_api_not_configured" time="0.161"><failure message="assert 401 == 200&#10; +  where 401 = &lt;Response [401]&gt;.status_code">backend/tests/test_whatsapp_cloud.py:111: in test_api_not_configured
    assert response.status_code == 200
E   assert 401 == 200
E    +  where 401 = &lt;Response [401]&gt;.status_code</failure></testcase><testcase classname="backend.tests.test_whatsapp_cloud.TestWhatsAppCloudTemplates" name="test_templates_endpoint_exists" time="0.444"><failure message="AssertionError: Templates endpoint failed: {&quot;detail&quot;:&quot;Invalid token&quot;}&#10;assert 401 == 200&#10; +  where 401 = &lt;Response [401]&gt;.status_code">backend/tests/test_whatsapp_cloud.py:138: in test_templates_endpoint_exists
    assert response.status_code == 200, f"Templates endpoint failed: {response.text}"
E   AssertionError: Templates endpoint failed: {"detail":"Invalid token"}
E   assert 401 == 200
E    +  where 401 = &lt;Response [401]&gt;.status_code</failure></testcase><testcase classname="backend.tests.test_whatsapp_cloud.TestWhatsAppCloudTemplates" name="test_templates_count_is_12" time="0.111"><failure message="assert 401 == 200&#10; +  where 401 = &lt;Response [401]&gt;.status_code">backend/tests/test_whatsapp_cloud.py:146: in test_templates_count_is_12
    assert response.status_code == 200
E   assert 401 == 200
E    +  where 401 = &lt;Response [401]&gt;.status_code</failure></testcase><testcase classname="backend.tests.test_whatsapp_cloud.TestWhatsAppCloudTemplates" name="test_templates_have_required_fields" time="0.114"><failure message="KeyError: 'templates'">backend/tests/test_whatsapp_cloud.py:162: in test_templates_have_required_fields
    templates = data["templates"]
                ^^^^^^^^^^^^^^^^^
E   KeyError: 'templates'</failure></testcase><testcase classname="backend.tests.test_whatsapp_cloud.TestWhatsAppCloudMassaSending" name="test_vistoria_massa_endpoint_exists" time="0.501"><failure message="AssertionError: Unexpected status: 401 - {&quot;detail&quot;:&quot;Invalid token&quot;}&#10;assert 401 in [200, 503]&#10; +  where 401 = &lt;Response [401]&gt;.status_code">backend/tests/test_whatsapp_cloud.py:223: in test_vistoria_massa_endpoint_exists
    assert response.status_code in [200, 503], f"Unexpected status: {response.status_code} - {response.text}"
E   AssertionError: Unexpected status: 401 - {"detail":"Invalid token"}
E   assert 401 in [200, 503]
E    +  where 401 = &lt;Response [401]&gt;.status_code</failure></testcase><testcase classname="backend.tests.test_whatsapp_cloud.TestWhatsAppAgendamentoConfig" name="test_get_agendamento_config" time="0.460"><failure message="AssertionError: Failed: {&quot;detail&quot;:&quot;Invalid token&quot;}&#10;assert 401 == 200&#10; +  where 401 = &lt;Response [401]&gt;.status_code">backend/tests/test_whatsapp_cloud.py:252: in test_get_agendamento_config
    assert response.status_code == 200, f"Failed: {response.text}"
E   AssertionError: Failed: {"detail":"Invalid token"}
E   assert 401 == 200
E    +  where 401 = &lt;Response [401]&gt;.status_code</failure></testcase><testcase classname="backend.tests.test_whatsapp_cloud.TestWhatsAppAgendamentoConfig" name="test_update_agendamento_config" time="0.110"><failure message="AssertionError: Failed: {&quot;detail&quot;:&quot;Invalid token&quot;}&#10;assert 401 == 200&#10; +  where 401 = &lt;Response [401]&gt;.status_code">backend/tests/test_whatsapp_cloud.py:285: in test_update_agendamento_config
    assert response.status_code == 200, f"Failed: {response.text}"
E   AssertionError: Failed: {"detail":"Invalid token"}
E   assert 401 == 200
E    +  where 401 = &lt;Response [401]&gt;.status_code</failure></testcase><testcase classname="backend.tests.test_whatsapp_cloud.TestRelatorioWhatsApp" name="test_enviar_whatsapp_relatorio_invalid_id" time="0.430"><failure message="AssertionError: Expected 404, got 401&#10;assert 401 == 404&#10; +  where 401 = &lt;Response [401]&gt;.status_code">backend/tests/test_whatsapp_cloud.py:324: in test_enviar_whatsapp_relatorio_invalid_id
    assert response.status_code == 404, f"Expected 404, got {response.status_code}"
E   AssertionError: Expected 404, got 401
E   assert 401 == 404
E    +  where 401 = &lt;Response [401]&gt;.status_code</failure></testcase><testcase classname="backend.tests.test_whatsapp_cloud.TestAlertasDocumentosWhatsApp" name="test_get_documentos_expirar" time="0.449"><failure message="AssertionError: Failed: {&quot;detail&quot;:&quot;Invalid token&quot;}&#10;assert 401 == 200&#10; +  where 401 = &lt;Response [401]&gt;.status_code">backend/tests/test_whatsapp_cloud.py:344: in test_get_documentos_expirar
    assert response.status_code == 200, f"Failed: {response.text}"
E   AssertionError: Failed: {"detail":"Invalid token"}
E   assert 401 == 200
E    +  where 401 = &lt;Response [401]&gt;.status_code</failure></testcase><testcase classname="backend.tests.test_whatsapp_cloud.TestAlertasDocumentosWhatsApp" name="test_enviar_alertas_whatsapp" time="0.098"><failure message="AssertionError: Unexpected status: 401 - {&quot;detail&quot;:&quot;Invalid token&quot;}&#10;assert 401 in [200, 503]&#10; +  where 401 = &lt;Response [401]&gt;.status_code">backend/tests/test_whatsapp_cloud.py:366: in test_enviar_alertas_whatsapp
    assert response.status_code in [200, 503], f"Unexpected status: {response.status_code} - {response.text}"
E   AssertionError: Unexpected status: 401 - {"detail":"Invalid token"}
E   assert 401 in [200, 503]
E    +  where 401 = &lt;Response [401]&gt;.status_code</failure></testcase><testcase classname="backend.tests.test_whatsapp_cloud.TestWhatsAppHistoricoEnvios" name="test_historico_envios_endpoint" time="0.476"><failure message="AssertionError: Failed: {&quot;detail&quot;:&quot;Invalid token&quot;}&#10;assert 401 == 200&#10; +  where 401 = &lt;Response [401]&gt;.status_code">backend/tests/test_whatsapp_cloud.py:394: in test_historico_envios_endpoint
    assert response.status_code == 200, f"Failed: {response.text}"
E   AssertionError: Failed: {"detail":"Invalid token"}
E   assert 401 == 200
E    +  where 401 = &lt;Response [401]&gt;.status_code</failure></testcase><testcase classname="backend.tests.test_whatsapp_cloud.TestMotoristasList" name="test_get_motoristas" time="0.451"><failure message="AssertionError: Failed: {&quot;detail&quot;:&quot;Invalid token&quot;}&#10;assert 401 == 200&#10; +  where 401 = &lt;Response [401]&gt;.status_code">backend/tests/test_whatsapp_cloud.py:421: in test_get_motoristas
    assert response.status_code == 200, f"Failed: {response.text}"
E   AssertionError: Failed: {"detail":"Invalid token"}
E   assert 401 == 200
E    +  where 401 = &lt;Response [401]&gt;.status_code</failure></testcase></testsuite></testsuites>
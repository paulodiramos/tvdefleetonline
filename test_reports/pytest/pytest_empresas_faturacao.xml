<?xml version="1.0" encoding="utf-8"?><testsuites name="pytest tests"><testsuite name="pytest" errors="0" failures="13" skipped="5" tests="19" time="4.590" timestamp="2026-02-18T15:23:44.785726+00:00" hostname="agent-env-98dafbdf-b396-435d-b250-36658da98fda"><testcase classname="tests.test_empresas_faturacao.TestEmpresasFaturacaoEndpoints" name="test_01_admin_login" time="0.555"><failure message="AssertionError: assert 'token' in {'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTgxODc4YWMtNDhmOS00M2E5LWFjZmMtZTY3NmRlMGZhN2MyIiwiZW1haWwiOiJhZG1pbkB0dmRlZmxlZXQuY29tIiwicm9sZSI6ImFkbWluIiwiZXhwIjoxNzcxNTE0NjI1fQ.hILF-ueq7i1yJREx85-w95vM5p7dbsj9AW3LPrjws7s', 'token_type': 'bearer', 'user': {'approved': True, 'associated_gestor_id': None, 'associated_partner_id': None, 'campos_customizados': {}, ...}}">tests/test_empresas_faturacao.py:65: in test_01_admin_login
    assert "token" in data
E   AssertionError: assert 'token' in {'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZTgxODc4YWMtNDhmOS00M2E5LWFjZmMtZTY3NmRlMGZhN2MyIiwiZW1haWwiOiJhZG1pbkB0dmRlZmxlZXQuY29tIiwicm9sZSI6ImFkbWluIiwiZXhwIjoxNzcxNTE0NjI1fQ.hILF-ueq7i1yJREx85-w95vM5p7dbsj9AW3LPrjws7s', 'token_type': 'bearer', 'user': {'approved': True, 'associated_gestor_id': None, 'associated_partner_id': None, 'campos_customizados': {}, ...}}</failure></testcase><testcase classname="tests.test_empresas_faturacao.TestEmpresasFaturacaoEndpoints" name="test_02_parceiro_login" time="0.380"><failure message="AssertionError: assert 'token' in {'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiYzY5M2M5ZWMtZGRkNS00MDBjLWI3OWQtNjFiNjUxZTdiM2ZkIiwiZW1haWwiOiJnZXJhbEB6bWJ1c2luZXMuY29tIiwicm9sZSI6InBhcmNlaXJvIiwiZXhwIjoxNzcxNTE0NjI1fQ.EV0ENuEZTccnvAOPymSm8WDPSGlV-iA28BUk2e6GWZ0', 'token_type': 'bearer', 'user': {'approved': True, 'associated_gestor_id': None, 'associated_partner_id': None, 'campos_customizados': {}, ...}}">tests/test_empresas_faturacao.py:76: in test_02_parceiro_login
    assert "token" in data
E   AssertionError: assert 'token' in {'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiYzY5M2M5ZWMtZGRkNS00MDBjLWI3OWQtNjFiNjUxZTdiM2ZkIiwiZW1haWwiOiJnZXJhbEB6bWJ1c2luZXMuY29tIiwicm9sZSI6InBhcmNlaXJvIiwiZXhwIjoxNzcxNTE0NjI1fQ.EV0ENuEZTccnvAOPymSm8WDPSGlV-iA28BUk2e6GWZ0', 'token_type': 'bearer', 'user': {'approved': True, 'associated_gestor_id': None, 'associated_partner_id': None, 'campos_customizados': {}, ...}}</failure></testcase><testcase classname="tests.test_empresas_faturacao.TestEmpresasFaturacaoEndpoints" name="test_03_list_empresas_admin" time="0.507"><failure message="AssertionError: Failed: {&quot;detail&quot;:&quot;Invalid token&quot;}&#10;assert 401 == 200&#10; +  where 401 = &lt;Response [401]&gt;.status_code">tests/test_empresas_faturacao.py:86: in test_03_list_empresas_admin
    assert response.status_code == 200, f"Failed: {response.text}"
E   AssertionError: Failed: {"detail":"Invalid token"}
E   assert 401 == 200
E    +  where 401 = &lt;Response [401]&gt;.status_code</failure></testcase><testcase classname="tests.test_empresas_faturacao.TestEmpresasFaturacaoEndpoints" name="test_04_list_empresas_parceiro" time="0.682"><failure message="AssertionError: Failed: {&quot;detail&quot;:&quot;Invalid token&quot;}&#10;assert 401 == 200&#10; +  where 401 = &lt;Response [401]&gt;.status_code">tests/test_empresas_faturacao.py:94: in test_04_list_empresas_parceiro
    assert response.status_code == 200, f"Failed: {response.text}"
E   AssertionError: Failed: {"detail":"Invalid token"}
E   assert 401 == 200
E    +  where 401 = &lt;Response [401]&gt;.status_code</failure></testcase><testcase classname="tests.test_empresas_faturacao.TestEmpresasFaturacaoEndpoints" name="test_05_list_empresas_unauthorized" time="0.101" /><testcase classname="tests.test_empresas_faturacao.TestEmpresasFaturacaoEndpoints" name="test_06_create_empresa_missing_fields" time="0.186"><failure message="AssertionError: Expected 400, got: 401&#10;assert 401 == 400&#10; +  where 401 = &lt;Response [401]&gt;.status_code">tests/test_empresas_faturacao.py:115: in test_06_create_empresa_missing_fields
    assert response.status_code == 400, f"Expected 400, got: {response.status_code}"
E   AssertionError: Expected 400, got: 401
E   assert 401 == 400
E    +  where 401 = &lt;Response [401]&gt;.status_code</failure></testcase><testcase classname="tests.test_empresas_faturacao.TestEmpresasFaturacaoEndpoints" name="test_07_create_empresa_missing_nipc" time="0.141"><failure message="AssertionError: Expected 400, got: 401&#10;assert 401 == 400&#10; +  where 401 = &lt;Response [401]&gt;.status_code">tests/test_empresas_faturacao.py:124: in test_07_create_empresa_missing_nipc
    assert response.status_code == 400, f"Expected 400, got: {response.status_code}"
E   AssertionError: Expected 400, got: 401
E   assert 401 == 400
E    +  where 401 = &lt;Response [401]&gt;.status_code</failure></testcase><testcase classname="tests.test_empresas_faturacao.TestEmpresasFaturacaoEndpoints" name="test_08_create_empresa_success" time="0.285"><failure message="AssertionError: Failed to create: {&quot;detail&quot;:&quot;Invalid token&quot;}&#10;assert 401 == 200&#10; +  where 401 = &lt;Response [401]&gt;.status_code">tests/test_empresas_faturacao.py:146: in test_08_create_empresa_success
    assert response.status_code == 200, f"Failed to create: {response.text}"
E   AssertionError: Failed to create: {"detail":"Invalid token"}
E   assert 401 == 200
E    +  where 401 = &lt;Response [401]&gt;.status_code</failure></testcase><testcase classname="tests.test_empresas_faturacao.TestEmpresasFaturacaoEndpoints" name="test_09_create_empresa_duplicate_nipc" time="0.000"><skipped type="pytest.skip" message="Previous test didn't create empresa">/app/backend/tests/test_empresas_faturacao.py:161: Previous test didn't create empresa</skipped></testcase><testcase classname="tests.test_empresas_faturacao.TestEmpresasFaturacaoEndpoints" name="test_10_get_empresa_by_id" time="0.000"><skipped type="pytest.skip" message="Previous test didn't create empresa">/app/backend/tests/test_empresas_faturacao.py:180: Previous test didn't create empresa</skipped></testcase><testcase classname="tests.test_empresas_faturacao.TestEmpresasFaturacaoEndpoints" name="test_11_get_empresa_not_found" time="0.119"><failure message="AssertionError: Expected 404, got: 401&#10;assert 401 == 404&#10; +  where 401 = &lt;Response [401]&gt;.status_code">tests/test_empresas_faturacao.py:198: in test_11_get_empresa_not_found
    assert response.status_code == 404, f"Expected 404, got: {response.status_code}"
E   AssertionError: Expected 404, got: 401
E   assert 401 == 404
E    +  where 401 = &lt;Response [401]&gt;.status_code</failure></testcase><testcase classname="tests.test_empresas_faturacao.TestEmpresasFaturacaoEndpoints" name="test_12_update_empresa" time="0.000"><skipped type="pytest.skip" message="Previous test didn't create empresa">/app/backend/tests/test_empresas_faturacao.py:208: Previous test didn't create empresa</skipped></testcase><testcase classname="tests.test_empresas_faturacao.TestEmpresasFaturacaoEndpoints" name="test_13_update_empresa_set_principal" time="0.000"><skipped type="pytest.skip" message="Previous test didn't create empresa">/app/backend/tests/test_empresas_faturacao.py:237: Previous test didn't create empresa</skipped></testcase><testcase classname="tests.test_empresas_faturacao.TestEmpresasFaturacaoEndpoints" name="test_14_dashboard_totais_ano_parceiro" time="0.138"><failure message="AssertionError: Failed: {&quot;detail&quot;:&quot;Invalid token&quot;}&#10;assert 401 == 200&#10; +  where 401 = &lt;Response [401]&gt;.status_code">tests/test_empresas_faturacao.py:265: in test_14_dashboard_totais_ano_parceiro
    assert response.status_code == 200, f"Failed: {response.text}"
E   AssertionError: Failed: {"detail":"Invalid token"}
E   assert 401 == 200
E    +  where 401 = &lt;Response [401]&gt;.status_code</failure></testcase><testcase classname="tests.test_empresas_faturacao.TestEmpresasFaturacaoEndpoints" name="test_15_dashboard_totais_ano_with_year_param" time="0.140"><failure message="AssertionError: Failed: {&quot;detail&quot;:&quot;Invalid token&quot;}&#10;assert 401 == 200&#10; +  where 401 = &lt;Response [401]&gt;.status_code">tests/test_empresas_faturacao.py:279: in test_15_dashboard_totais_ano_with_year_param
    assert response.status_code == 200, f"Failed: {response.text}"
E   AssertionError: Failed: {"detail":"Invalid token"}
E   assert 401 == 200
E    +  where 401 = &lt;Response [401]&gt;.status_code</failure></testcase><testcase classname="tests.test_empresas_faturacao.TestEmpresasFaturacaoEndpoints" name="test_16_delete_empresa" time="0.001"><skipped type="pytest.skip" message="Previous test didn't create empresa">/app/backend/tests/test_empresas_faturacao.py:291: Previous test didn't create empresa</skipped></testcase><testcase classname="tests.test_empresas_faturacao.TestEmpresasFaturacaoEndpoints" name="test_17_delete_empresa_not_found" time="0.218"><failure message="AssertionError: Expected 404, got: 401&#10;assert 401 == 404&#10; +  where 401 = &lt;Response [401]&gt;.status_code">tests/test_empresas_faturacao.py:313: in test_17_delete_empresa_not_found
    assert response.status_code == 404, f"Expected 404, got: {response.status_code}"
E   AssertionError: Expected 404, got: 401
E   assert 401 == 404
E    +  where 401 = &lt;Response [401]&gt;.status_code</failure></testcase><testcase classname="tests.test_empresas_faturacao.TestUploadReciboWithEmpresaFaturacao" name="test_18_upload_recibo_endpoint_exists" time="0.472"><failure message="AssertionError: Unexpected status: 401&#10;assert 401 in [404, 403, 400]&#10; +  where 401 = &lt;Response [401]&gt;.status_code">tests/test_empresas_faturacao.py:348: in test_18_upload_recibo_endpoint_exists
    assert response.status_code in [404, 403, 400], f"Unexpected status: {response.status_code}"
E   AssertionError: Unexpected status: 401
E   assert 401 in [404, 403, 400]
E    +  where 401 = &lt;Response [401]&gt;.status_code</failure></testcase><testcase classname="tests.test_empresas_faturacao.TestExistingEmpresaZenyMacaia" name="test_19_find_zeny_macaia_empresa" time="0.471"><failure message="AssertionError: Failed: {&quot;detail&quot;:&quot;Invalid token&quot;}&#10;assert 401 == 200&#10; +  where 401 = &lt;Response [401]&gt;.status_code">tests/test_empresas_faturacao.py:377: in test_19_find_zeny_macaia_empresa
    assert response.status_code == 200, f"Failed: {response.text}"
E   AssertionError: Failed: {"detail":"Invalid token"}
E   assert 401 == 200
E    +  where 401 = &lt;Response [401]&gt;.status_code</failure></testcase></testsuite></testsuites>